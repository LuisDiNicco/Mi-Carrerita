{"numFailedTestSuites":2,"numFailedTests":4,"numPassedTestSuites":0,"numPassedTests":7,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":2,"numTotalTests":11,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1771587308055,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["TrophyService","checkAndUnlockTrophies"],"duration":23,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TrophyService checkAndUnlockTrophies debería lanzar NotFoundException si el usuario no existe","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771587308937,"status":"passed","title":"debería lanzar NotFoundException si el usuario no existe"},{"ancestorTitles":["TrophyService","checkAndUnlockTrophies"],"duration":3,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at TrophyService.buildEvaluationContext (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.ts:416:42)\n    at TrophyService.checkAndUnlockTrophies (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.ts:90:21)\n    at Object.<anonymous> (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.spec.ts:89:28)"],"fullName":"TrophyService checkAndUnlockTrophies debería desbloquear el trofeo FIRST_SUBJECT_COMPLETED si se aprueba la primera materia","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771587308961,"status":"failed","title":"debería desbloquear el trofeo FIRST_SUBJECT_COMPLETED si se aprueba la primera materia"},{"ancestorTitles":["TrophyService","checkAndUnlockTrophies"],"duration":2,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at TrophyService.buildEvaluationContext (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.ts:416:42)\n    at TrophyService.checkAndUnlockTrophies (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.ts:90:21)\n    at Object.<anonymous> (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.spec.ts:115:28)"],"fullName":"TrophyService checkAndUnlockTrophies no debería re-desbloquear un trofeo ya desbloqueado","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771587308965,"status":"failed","title":"no debería re-desbloquear un trofeo ya desbloqueado"},{"ancestorTitles":["TrophyService","Efficiency and Resource Checks"],"duration":3,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at TrophyService.buildEvaluationContext (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.ts:416:42)\n    at TrophyService.checkAndUnlockTrophies (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.ts:90:21)\n    at Object.<anonymous> (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.spec.ts:150:28)"],"fullName":"TrophyService Efficiency and Resource Checks debería procesar grandes volúmenes de materias (10.000 records ficticios) sin memory limit excedido e iterador","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771587308968,"status":"failed","title":"debería procesar grandes volúmenes de materias (10.000 records ficticios) sin memory limit excedido e iterador"}],"endTime":1771587309065,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mTrophyService › checkAndUnlockTrophies › debería desbloquear el trofeo FIRST_SUBJECT_COMPLETED si se aprueba la primera materia\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 414 |\u001b[39m       userId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 415 |\u001b[39m       userEmail\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 416 |\u001b[39m       totalSubjects\u001b[33m:\u001b[39m subjectStats\u001b[33m.\u001b[39m_count\u001b[33m.\u001b[39mid\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 417 |\u001b[39m       completedSubjects\u001b[33m:\u001b[39m completedRecords\u001b[33m.\u001b[39mlength\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 418 |\u001b[39m       totalHours\u001b[33m:\u001b[39m subjectStats\u001b[33m.\u001b[39m_sum\u001b[33m.\u001b[39mhours \u001b[33m?\u001b[39m\u001b[33m?\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 419 |\u001b[39m       completedHours\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TrophyService.buildEvaluationContext (\u001b[22m\u001b[2mmodules/trophy/services/trophy.service.ts\u001b[2m:416:42)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TrophyService.checkAndUnlockTrophies (\u001b[22m\u001b[2mmodules/trophy/services/trophy.service.ts\u001b[2m:90:21)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/trophy/services/trophy.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:89:28)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mTrophyService › checkAndUnlockTrophies › no debería re-desbloquear un trofeo ya desbloqueado\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 414 |\u001b[39m       userId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 415 |\u001b[39m       userEmail\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 416 |\u001b[39m       totalSubjects\u001b[33m:\u001b[39m subjectStats\u001b[33m.\u001b[39m_count\u001b[33m.\u001b[39mid\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 417 |\u001b[39m       completedSubjects\u001b[33m:\u001b[39m completedRecords\u001b[33m.\u001b[39mlength\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 418 |\u001b[39m       totalHours\u001b[33m:\u001b[39m subjectStats\u001b[33m.\u001b[39m_sum\u001b[33m.\u001b[39mhours \u001b[33m?\u001b[39m\u001b[33m?\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 419 |\u001b[39m       completedHours\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TrophyService.buildEvaluationContext (\u001b[22m\u001b[2mmodules/trophy/services/trophy.service.ts\u001b[2m:416:42)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TrophyService.checkAndUnlockTrophies (\u001b[22m\u001b[2mmodules/trophy/services/trophy.service.ts\u001b[2m:90:21)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/trophy/services/trophy.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:115:28)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mTrophyService › Efficiency and Resource Checks › debería procesar grandes volúmenes de materias (10.000 records ficticios) sin memory limit excedido e iterador\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 414 |\u001b[39m       userId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 415 |\u001b[39m       userEmail\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 416 |\u001b[39m       totalSubjects\u001b[33m:\u001b[39m subjectStats\u001b[33m.\u001b[39m_count\u001b[33m.\u001b[39mid\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 417 |\u001b[39m       completedSubjects\u001b[33m:\u001b[39m completedRecords\u001b[33m.\u001b[39mlength\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 418 |\u001b[39m       totalHours\u001b[33m:\u001b[39m subjectStats\u001b[33m.\u001b[39m_sum\u001b[33m.\u001b[39mhours \u001b[33m?\u001b[39m\u001b[33m?\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 419 |\u001b[39m       completedHours\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TrophyService.buildEvaluationContext (\u001b[22m\u001b[2mmodules/trophy/services/trophy.service.ts\u001b[2m:416:42)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat TrophyService.checkAndUnlockTrophies (\u001b[22m\u001b[2mmodules/trophy/services/trophy.service.ts\u001b[2m:90:21)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/trophy/services/trophy.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:150:28)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\trophy\\services\\trophy.service.spec.ts","startTime":1771587308297,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Schedule Helpers","isValidTimetable"],"duration":2,"failing":false,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at Object.<anonymous> (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\schedule\\helpers\\schedule.helpers.spec.ts:19:34)\n    at Promise.finally.completed (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"Schedule Helpers isValidTimetable debería ser válido para datos correctos","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1771587309147,"status":"failed","title":"debería ser válido para datos correctos"},{"ancestorTitles":["Schedule Helpers","isValidTimetable"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Schedule Helpers isValidTimetable debería ser inválido si falta información","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1771587309152,"status":"passed","title":"debería ser inválido si falta información"},{"ancestorTitles":["Schedule Helpers","isValidTimetable"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Schedule Helpers isValidTimetable debería ser inválido si dayOfWeek es incorrecto (boundaries)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771587309153,"status":"passed","title":"debería ser inválido si dayOfWeek es incorrecto (boundaries)"},{"ancestorTitles":["Schedule Helpers","checkNewTimetableConflicts"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Schedule Helpers checkNewTimetableConflicts no debería detectar conflicto si es distinto día o turno","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771587309154,"status":"passed","title":"no debería detectar conflicto si es distinto día o turno"},{"ancestorTitles":["Schedule Helpers","checkNewTimetableConflicts"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Schedule Helpers checkNewTimetableConflicts debería detectar conflicto si mismo dia y turno","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1771587309155,"status":"passed","title":"debería detectar conflicto si mismo dia y turno"},{"ancestorTitles":["Schedule Helpers","detectConflicts (Múltiples Entradas al unísono)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Schedule Helpers detectConflicts (Múltiples Entradas al unísono) debería retornar vacío si todos están okay","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771587309156,"status":"passed","title":"debería retornar vacío si todos están okay"},{"ancestorTitles":["Schedule Helpers","detectConflicts (Múltiples Entradas al unísono)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Schedule Helpers detectConflicts (Múltiples Entradas al unísono) debería identificar múltiples conflictos bidireccionales evitando duplicados exactos","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1771587309156,"status":"passed","title":"debería identificar múltiples conflictos bidireccionales evitando duplicados exactos"}],"endTime":1771587309159,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mSchedule Helpers › isValidTimetable › debería ser válido para datos correctos\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mfalse\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 17 |\u001b[39m             }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m isValidTimetable(timetable)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 19 |\u001b[39m             expect(result\u001b[33m.\u001b[39mvalid)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 20 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m         it(\u001b[32m'debería ser inválido si falta información'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mmodules/schedule/helpers/schedule.helpers.spec.ts\u001b[39m\u001b[0m\u001b[2m:19:34)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\luisd\\Desktop\\Proyectos\\Mi-Carrerita\\server\\src\\modules\\schedule\\helpers\\schedule.helpers.spec.ts","startTime":1771587309086,"status":"failed","summary":""}],"wasInterrupted":false}
